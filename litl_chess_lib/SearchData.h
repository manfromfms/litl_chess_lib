#pragma once

#include "move.h"

namespace litl {
	class SearchData
	{
	};

	static struct CompareByOrder
	{
		bool operator() (const litl::move& obj1, const litl::move& obj2)
		{
			return (obj1.order > obj2.order);
		}
	};

	static int pawnValue   = -120;
	static int bishopValue = -340;
	static int knightValue = -220;
	static int rookValue   = -240;
	static int queenValue  = -190;
	static int kingValue   = -100;

	/* This is an array of pieces values coefficients generated from real games on lichess 
	
	Piece value has to be multiplied by "a-127" and then devided by "127" to get value on the given square
	Game periods:  0-5   full moves
				   6-15  full moves
				  16-30  full moves
				  31-60  full moves
				  60...  full moves
	
	[{"p": [(64)], "b": [(64)], ...},{(12)},{(12)},{(12)},{(12)}]
	
	*/

	static unsigned char valueBoards[3840] = { 127,127,127,127,127,127,127,127,135,138,135,137,134,136,127,136,151,103,174,135,95,162,133,147,135,146,129,103,147,131,146,122,116,167,77,156,78,128,135,154,181,93,134,125,136,102,157,108,204,127,127,127,127,127,127,204,127,127,127,127,127,127,127,127,127,127,137,127,127,134,127,127,127,91,127,100,137,127,178,127,125,127,127,126,96,127,127,166,127,174,171,127,127,122,88,127,127,110,198,140,128,169,136,107,116,127,55,170,192,107,127,126,65,192,110,116,140,127,73,246,198,71,141,128,228,168,127,66,127,138,127,127,127,127,134,127,133,127,93,109,138,114,127,98,116,85,101,43,127,143,162,136,170,204,134,133,82,195,89,139,127,104,127,76,101,127,172,127,127,153,127,80,210,127,127,127,110,127,103,127,207,172,127,176,170,127,136,85,127,175,127,240,135,69,43,127,127,151,119,136,145,64,127,127,127,127,139,122,88,127,127,127,127,127,127,141,163,77,127,127,127,127,127,156,152,85,127,127,127,127,127,145,136,127,127,127,127,127,127,122,158,85,127,127,85,85,213,175,191,127,127,127,127,127,127,198,127,127,127,189,136,83,185,127,127,127,127,111,204,116,108,127,127,127,118,170,147,182,128,194,127,123,109,161,161,131,135,134,97,175,98,127,60,126,125,178,130,112,109,146,178,123,119,118,113,98,148,182,189,127,149,134,153,153,127,98,127,127,59,100,127,127,97,134,115,127,127,127,127,127,125,129,188,127,127,127,127,156,106,196,182,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,142,127,218,127,127,204,206,198,157,132,151,148,151,127,143,107,165,153,135,164,94,139,124,110,138,150,131,128,154,121,116,102,152,163,189,106,114,156,155,115,119,114,119,136,120,118,116,120,127,127,127,127,127,127,127,127,205,160,139,74,197,237,127,139,97,161,69,165,106,199,134,209,125,66,160,146,184,73,191,112,82,153,83,165,146,204,105,73,127,193,208,51,131,144,120,127,184,127,127,84,90,182,127,167,127,138,127,139,115,127,153,127,127,127,127,127,127,119,127,127,243,127,161,162,212,210,139,225,145,127,164,136,170,139,127,130,127,163,127,134,170,127,127,127,170,145,127,155,138,127,137,127,127,85,148,180,191,167,127,167,134,193,118,127,127,114,102,126,79,127,113,116,124,184,127,81,127,118,127,127,127,127,119,127,182,170,127,127,127,127,127,134,163,109,191,127,127,127,127,143,162,127,127,127,127,127,142,119,168,51,127,127,127,85,70,120,156,43,85,127,127,191,43,133,93,118,64,64,127,127,118,137,131,55,127,127,127,127,85,97,119,112,95,127,127,64,104,119,164,165,127,93,64,130,181,144,92,92,122,176,128,161,142,143,104,129,135,193,17,92,127,99,101,114,160,115,176,109,157,167,139,108,127,127,161,136,185,133,159,127,126,127,73,89,144,170,127,147,127,89,122,131,131,127,127,127,146,166,120,124,81,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,145,127,233,148,51,127,127,127,188,156,138,134,127,127,127,127,127,118,119,96,127,127,127,127,127,127,127,127,127,127,127,138,139,138,146,138,140,123,139,169,124,149,139,104,154,128,148,105,145,101,114,118,127,127,116,127,158,114,137,139,117,141,126,182,150,182,138,170,173,161,134,182,199,184,180,188,181,187,186,127,127,127,127,127,127,127,127,165,206,143,157,118,136,91,182,177,150,157,112,134,170,145,184,149,96,92,120,97,114,127,140,239,133,140,223,176,141,142,197,150,156,183,207,199,177,149,164,131,201,204,158,195,161,209,125,199,180,150,152,150,185,174,181,191,171,171,170,184,175,192,167,74,141,180,129,140,97,137,87,154,129,124,116,131,136,121,104,119,129,113,150,131,113,129,120,88,150,146,135,132,163,123,146,173,135,149,154,128,158,150,175,182,155,189,161,183,176,155,191,137,196,165,188,182,183,174,178,202,204,180,192,178,209,199,189,137,151,102,140,118,130,122,139,137,165,135,166,152,141,103,142,117,106,121,166,112,138,73,121,148,163,135,171,152,186,149,161,153,177,202,214,224,197,158,162,116,110,132,151,191,161,139,146,156,153,156,166,154,153,112,147,149,147,156,154,177,167,155,162,120,145,116,157,139,130,135,105,115,102,120,132,166,123,109,216,125,133,104,140,120,111,148,135,149,125,80,111,138,156,130,136,126,151,138,153,135,129,129,158,136,118,156,151,147,142,137,139,132,130,128,127,135,134,124,131,136,131,142,123,120,122,132,133,171,119,108,137,132,136,122,157,140,106,120,128,143,134,156,165,143,119,137,156,130,155,150,167,115,137,144,157,183,184,166,153,61,164,194,199,233,237,224,170,230,127,138,233,236,241,218,249,237,127,241,127,127,127,223,127,208,184,178,127,217,192,220,216,127,127,127,127,127,127,127,127,221,202,190,183,182,154,159,178,162,147,186,165,171,165,137,108,90,154,117,136,137,91,130,92,105,128,109,83,114,105,112,95,153,145,153,114,120,153,137,127,120,111,118,149,130,128,115,125,127,127,127,127,127,127,127,127,176,104,170,168,191,190,183,170,186,148,112,156,166,182,180,125,133,224,184,175,189,189,156,132,158,152,199,196,189,100,150,126,228,186,120,232,156,138,131,248,167,111,117,91,99,75,85,131,86,137,60,118,96,108,126,174,134,81,137,124,93,119,203,128,201,202,177,198,210,197,177,203,165,186,174,174,171,175,209,180,200,170,192,152,167,176,178,173,150,140,142,162,124,153,148,147,121,137,138,112,127,133,127,106,114,117,101,87,103,90,113,118,114,149,125,109,121,110,82,105,115,119,144,99,91,110,123,107,139,139,158,136,147,153,116,159,149,145,154,170,152,167,144,136,119,144,178,141,189,152,134,140,144,162,194,205,201,162,139,151,140,133,141,169,84,92,139,130,111,93,80,121,63,112,72,98,110,90,125,137,114,144,123,116,123,129,111,111,98,119,110,123,117,108,118,106,97,115,105,123,122,104,113,130,117,111,117,118,134,122,132,140,155,123,123,143,112,125,136,123,118,116,132,133,140,114,106,112,130,109,133,115,119,119,104,106,99,111,116,143,118,126,125,116,167,110,126,144,107,121,112,165,135,143,128,122,220,196,201,221,218,217,169,206,250,127,240,246,246,241,238,180,153,215,201,251,127,191,212,247,224,178,218,219,205,205,194,229,189,144,131,150,143,129,106,166,158,130,138,129,131,113,104,101,144,141,130,129,108,101,92,105,141,143,115,121,112,95,85,64,127,127,127,127,127,127,127,127,154,155,158,171,161,162,131,154,174,147,163,156,132,167,141,154,126,146,124,130,127,137,134,126,130,145,122,134,131,123,142,118,158,150,143,142,149,143,134,130,140,141,138,157,142,144,131,136,127,127,127,127,127,127,127,127,137,135,164,156,156,154,110,150,117,147,159,128,138,131,131,120,148,154,115,109,119,145,175,118,201,174,147,191,169,164,152,199,197,165,203,215,203,183,157,176,143,217,212,196,209,200,210,147,206,190,205,188,191,206,192,197,185,193,170,193,194,179,196,170,125,166,167,135,132,118,161,134,155,117,125,128,128,127,138,121,126,119,111,130,105,118,116,129,132,160,124,148,126,148,145,141,180,159,160,184,152,174,149,194,196,178,196,170,180,198,172,190,199,203,198,190,200,183,205,194,187,190,184,188,189,192,189,186,155,133,119,133,116,126,123,154,141,153,127,123,123,127,111,139,117,90,89,99,88,106,79,112,125,119,136,157,123,162,122,155,191,193,211,223,194,204,187,198,174,163,192,183,191,189,161,181,183,192,190,202,190,188,187,180,144,136,129,122,111,129,122,141,97,138,133,176,188,148,144,129,178,101,137,158,166,140,119,174,160,119,125,161,144,134,128,140,168,162,154,187,152,145,157,145,175,187,204,210,198,180,186,193,169,172,185,158,173,178,149,179,138,157,140,163,151,151,149,155,139,137,145,135,152,145,156,158,142,136,127,158,139,133,136,136,126,126,132,130,139,140,132,146,131,117,126,127,126,138,136,170,117,119,112,123,128,130,138,147,127,146,153,156,148,140,152,154,136,151,169,166,169,150,138,150,172,156,158,169,166,161,144,165,149,137,138,155,164,137,128,143,127,127,127,127,127,127,127,127,139,136,132,145,145,134,117,130,134,134,137,127,144,131,126,115,109,137,113,118,127,96,134,95,114,130,119,112,130,123,125,114,152,140,147,141,145,166,149,150,138,126,140,174,158,158,128,149,127,127,127,127,127,127,127,127,179,193,167,192,190,181,198,173,187,175,205,180,199,199,182,196,133,218,204,207,192,199,206,154,197,158,195,205,203,176,175,168,200,177,139,179,165,152,134,186,152,152,140,108,109,128,109,101,143,132,98,130,114,130,118,118,90,98,158,134,110,139,138,120,185,176,187,180,191,198,181,179,194,201,193,181,183,182,210,183,178,176,187,167,182,194,164,182,161,147,158,179,147,169,136,175,150,145,119,139,122,129,148,102,110,102,108,101,96,92,116,118,121,114,118,111,130,115,136,106,130,148,141,124,108,123,156,113,144,130,133,129,108,124,117,140,169,183,182,197,176,187,181,182,171,156,195,172,188,178,145,172,177,185,200,210,192,191,170,183,131,112,112,141,102,124,110,128,112,84,85,81,77,89,79,98,131,110,109,116,103,122,113,131,143,121,120,121,108,115,105,144,155,140,147,140,154,150,135,151,128,144,123,165,143,152,156,150,184,169,178,150,173,171,171,181,177,190,192,207,189,187,176,187,178,168,156,184,173,168,173,166,146,126,108,158,142,138,121,167,189,111,115,177,199,158,126,146,114,146,145,182,200,177,159,132,145,140,152,148,149,134,135,132,163,150,156,152,152,147,129,156,154,130,144,143,138,129,111,127,133,154,131,141,125,112,121,132,136,132,117,112,107,98,122,127,149,130,129,114,114,119,113,125,132,135,132,129,120,114,123,120,126,147,125,146,125,114,127,143,127,127,127,127,127,127,127,127,163,150,158,165,155,162,135,160,174,156,166,151,152,174,158,170,149,156,151,146,149,152,160,145,144,157,138,140,139,146,158,132,143,155,135,145,141,141,152,126,137,136,136,136,126,138,130,127,127,127,127,127,127,127,127,127,101,144,153,125,121,137,98,129,114,130,111,135,130,125,127,97,167,128,109,105,96,126,141,114,115,117,109,87,89,113,116,144,143,129,109,84,85,116,131,162,141,139,115,105,121,112,117,141,158,137,145,115,116,133,135,161,117,121,120,126,133,134,135,120,136,169,157,128,132,120,145,143,138,102,121,113,92,114,132,139,125,117,122,105,116,110,126,124,122,137,127,108,96,120,120,127,164,146,134,144,125,125,134,176,170,153,156,145,131,143,161,146,179,161,162,157,161,153,160,191,175,166,173,169,167,183,166,161,141,105,100,105,107,103,103,126,126,122,79,98,89,94,90,128,108,90,76,84,71,82,92,108,91,105,92,99,93,105,95,109,106,98,111,107,88,113,99,126,113,109,93,112,109,114,98,105,132,128,107,111,112,108,104,133,83,84,85,90,83,82,87,83,65,112,125,139,153,133,71,152,159,201,170,162,127,106,85,121,106,201,161,96,185,186,168,198,146,102,107,115,167,135,77,131,191,142,154,166,205,215,174,154,152,127,192,172,154,64,209,210,212,85,151,191,177,97,153,224,143,129,155,168,146,145,128,143,145,140,122,121,121,119,132,164,135,121,107,105,104,110,125,134,133,119,113,105,98,110,127,131,140,129,114,102,100,112,132,150,153,116,121,114,111,118,127,150,153,123,131,122,120,130,131,147,155,145,139,137,137,137,151,146,163,152,144,153,140,154,151,163,127,127,127,127,127,127,127,127,133,133,130,132,135,129,132,124,136,148,135,143,143,127,151,121,130,149,135,141,147,124,158,121,147,153,151,154,161,159,157,144,168,148,165,156,164,177,164,172,152,133,151,155,149,163,130,168,127,127,127,127,127,127,127,127,110,137,146,145,129,119,130,126,135,136,141,137,110,136,126,174,127,143,128,106,122,122,110,120,141,143,100,103,93,121,134,124,129,114,111,85,81,131,97,120,149,106,118,100,95,84,110,127,119,131,113,137,115,111,123,121,126,94,156,117,89,139,108,130,159,168,162,162,164,168,164,182,200,173,152,154,163,165,163,164,145,165,150,141,135,151,135,156,137,121,145,135,126,135,128,126,128,145,115,103,115,97,114,96,99,103,112,126,107,102,125,111,106,116,97,114,129,113,120,116,108,154,137,117,145,126,159,151,91,77,82,81,92,78,77,84,133,109,99,112,127,143,118,125,105,103,98,109,107,92,104,122,127,113,109,99,104,114,106,121,112,97,84,83,97,109,94,113,115,87,81,72,86,80,93,103,134,100,89,92,97,105,115,124,141,97,100,89,103,108,98,134,133,134,151,173,151,140,175,128,207,166,168,189,200,181,163,214,170,194,204,161,202,202,177,214,96,158,186,215,221,119,149,211,187,204,189,229,186,174,201,221,200,111,127,210,224,202,136,170,239,95,112,170,173,207,79,157,121,160,149,147,161,211,202,178,156,150,153,157,149,144,147,149,161,148,139,133,134,139,140,155,141,132,127,119,117,116,134,146,146,122,128,115,100,111,123,144,127,122,112,99,102,106,119,146,140,115,115,105,106,104,110,144,128,124,109,99,103,113,113,153,169,151,122,124,123,127,139,162,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,75,127,127,127,127,57,127,127,127,127,127,51,127,183,157,127,127,26,45,127,127,85,102,238,127,153,127,127,127,43,61,51,204,85,85,127,127,97,73,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,170,127,127,127,127,127,85,127,170,127,170,127,127,127,127,233,127,204,127,127,127,127,170,127,235,127,127,127,127,127,127,127,40,182,127,235,191,127,127,127,127,51,191,127,70,73,127,127,127,127,127,127,127,146,127,19,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,11,127,127,85,127,127,127,127,22,127,29,218,127,127,127,127,127,127,127,64,127,127,127,127,127,102,127,240,127,127,127,127,127,127,127,127,64,101,64,23,109,127,127,18,16,127,127,127,127,17,127,127,22,127,13,55,17,59,127,102,127,22,127,127,16,127,127,127,127,26,127,9,34,30,127,107,102,80,127,127,127,16,127,127,101,127,48,45,27,64,127,157,3,85,127,21,37,51,75,56,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,225,182,82,163,173,185,181,238,166,72,91,46,79,144,199,183,181,126,119,50,57,144,175,171,211,98,51,65,40,61,106,190,108,77,24,23,44,90,94,71,124,100,71,58,59,54,81,146,181,98,126,77,105,77,125,138,162,167,131,180,126,123,201,129,127,127,127,127,127,127,127,127,77,178,170,127,51,127,229,223,26,196,127,127,127,127,208,209,127,195,127,19,127,127,127,109,191,216,127,127,64,127,157,29,127,218,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,201,225,85,127,198,127,127,127,182,204,127,204,127,127,127,113,127,32,223,127,191,127,49,127,127,229,127,153,127,127,127,51,127,127,127,127,200,127,127,127,127,127,146,64,127,127,29,127,127,32,85,127,127,127,218,127,127,204,127,127,127,127,85,127,127,85,127,127,127,127,127,127,127,191,127,127,102,127,127,127,127,127,127,127,127,127,127,127,127,127,127,8,127,127,127,127,127,127,85,113,127,109,127,127,127,127,51,127,127,127,127,127,127,127,127,127,127,127,29,127,127,127,127,127,16,127,127,49,220,47,68,51,168,111,241,16,173,124,51,127,101,187,127,51,57,127,127,11,12,127,127,16,163,37,127,29,23,127,127,127,51,127,127,127,127,127,127,127,127,36,90,82,127,49,127,204,79,82,58,127,85,179,127,193,127,73,81,127,91,204,113,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,235,198,193,140,149,165,186,175,217,198,185,175,149,170,204,189,196,163,146,157,170,142,138,201,201,126,137,99,67,104,97,196,166,140,115,74,59,72,109,199,195,131,146,118,113,91,130,151,199,107,127,113,138,121,195,231,246,213,156,181,201,225,239,242 };


	static int getPieceValue(char type, int num, int move) {
		int moveIndex = 0;
		if (move <= 5) {
			moveIndex = 0;
		}
		else if (move <= 15) {
			moveIndex = 1;
		}
		else if (move <= 30) {
			moveIndex = 2;
		}
		else if (move <= 60) {
			moveIndex = 3;
		}
		else {
			moveIndex = 4;
		}

		switch (type)
		{
		default:
			return 0;
			break;

		case 'p':
			return pawnValue + pawnValue * (valueBoards[moveIndex * 12 * 64 + 0 * 64 + num] - 127) / 127;
			break;
		case 'b':
			return bishopValue + bishopValue * (valueBoards[moveIndex * 12 * 64 + 1 * 64 + num] - 127) / 127;
			break;
		case 'n':
			return knightValue + knightValue * (valueBoards[moveIndex * 12 * 64 + 2 * 64 + num] - 127) / 127;
			break;
		case 'r':
			return rookValue + rookValue * (valueBoards[moveIndex * 12 * 64 + 3 * 64 + num] - 127) / 127;
			break;
		case 'q':
			return queenValue + queenValue * (valueBoards[moveIndex * 12 * 64 + 4 * 64 + num] - 127) / 127;
			break;
		case 'k':
			return kingValue + kingValue * (valueBoards[moveIndex * 12 * 64 + 5 * 64 + num] - 127) / 127;
			break;
		case 'P':
			return pawnValue + pawnValue * (valueBoards[moveIndex * 12 * 64 + 6 * 64 + num] - 127) / 127;
			break;
		case 'B':
			return bishopValue + bishopValue * (valueBoards[moveIndex * 12 * 64 + 7 * 64 + num] - 127) / 127;
			break;
		case 'N':
			return knightValue + knightValue * (valueBoards[moveIndex * 12 * 64 + 8 * 64 + num] - 127) / 127;
			break;
		case 'R':
			return rookValue + rookValue * (valueBoards[moveIndex * 12 * 64 + 9 * 64 + num] - 127) / 127;
			break;
		case 'Q':
			return queenValue + queenValue * (valueBoards[moveIndex * 12 * 64 + 10 * 64 + num] - 127) / 127;
			break;
		case 'K':
			return kingValue + kingValue * (valueBoards[moveIndex * 12 * 64 + 11 * 64 + num] - 127) / 127;
			break;
		}
	}
}